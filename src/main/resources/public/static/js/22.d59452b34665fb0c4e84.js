webpackJsonp([22],{669:function(t,e,a){function i(t){a(796)}var n=a(47)(a(722),a(833),i,"data-v-464f98d1",null);t.exports=n.exports},691:function(t,e,a){"use strict";function i(t){return a.i(B.a)("/apply/create",t,"post")}function n(t){return a.i(B.a)("/apply/drop",t,"post")}function r(t){return a.i(B.a)("/apply/disable",t,"post")}function s(t){return a.i(B.a)("/apply/save",t,"post")}function o(t){return a.i(B.a)("/apply/saveFirst",t,"post")}function d(t){return a.i(B.a)("/user/update",t,"post")}function l(t){return a.i(B.a)("/apply/update",t,"post")}function p(t){return a.i(B.a)("/static/deviceClass?"+t,t,"get")}function c(t){return a.i(B.a)("/static/deviceType?"+t,t,"get")}function u(t){return a.i(B.a)("/map/provinces",t,"get")}function h(t){return a.i(B.a)("/map/cities?"+t,t,"get")}function v(t){return a.i(B.a)("/map/areas?"+t,t,"get")}function y(t){return a.i(B.a)("/apply/get?"+t,t,"get")}function g(t){return a.i(B.a)("/apply/confirm?"+t,t,"get")}function A(t){return a.i(B.a)("/map/organization?"+t,t,"get")}function m(t){return a.i(B.a)("/device/cylinder?"+t,t,"get")}function f(t){return a.i(B.a)("/device/pipe?"+t,t,"get")}function b(t){return a.i(B.a)("/device/cylinder",t,"post")}function x(t){return a.i(B.a)("/device/pipe",t,"post")}function C(t){return a.i(B.a)("/apply/create",t,"post")}e.f=i,e.s=n,e.r=r,e.h=s,e.i=o,e.t=d,e.g=l,e.q=p,e.k=c,e.a=u,e.b=h,e.c=v,e.e=y,e.j=g,e.d=A,e.l=m,e.m=f,e.n=b,e.o=x,e.p=C;var B=a(98)},692:function(t,e,a){"use strict";function i(t){return a.i(r.a)("/device/get",t,"post")}function n(t){return a.i(r.a)("/device/get?"+t,t,"get")}e.a=i,e.b=n;var r=a(98)},722:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(71),n=a.n(i),r=a(48),s=a(692),o=a(691);e.default={data:function(){var t=this;return{options:[{value:"one",label:"按台（套）申请",children:[{value:"1",label:"锅炉"},{value:"2",label:"压力容器（气瓶除外）"},{value:"3",label:"电梯"},{value:"4",label:"起重机械"},{value:"5",label:"客运索道"},{value:"6",label:"大型游乐设施"},{value:"7",label:"场 (厂)内专用机动车辆"},{value:"8",label:"车用气瓶"}]},{value:"two",label:"按单位申请",children:[{value:"9",label:"气瓶(车用气瓶除外)"},{value:"10",label:"工业管道"}]}],deviceType:[],List:[{value:"1",label:"提交未受理"},{value:"2",label:"受理通过未审批"}],sort:[{value:"1",label:"首次申请"},{value:"2",label:"变更申请"},{value:"3",label:"停用申请"},{value:"4",label:"报废申请"},{value:"5",label:"停用后启用申请"}],columns5:[{type:"index",key:"id",width:60,fixed:"left"},{title:"设备种类",key:"deviceCategory",width:120,fixed:"left",className:"demo-table-info-column"},{title:"设备类别",key:"deviceClass",width:120},{title:"设备品种",key:"deviceKind",width:120},{title:"设备代码",key:"eqCode",width:120},{title:"单位内编号",key:"comCode",width:120},{title:"停用开始日期",key:"noUseDate",width:125},{title:"停用结束日期",key:"noUseEndDate",width:125},{title:"注销日期",key:"disableDate",width:125},{title:"使用单位填表人员",key:"comTablePerson",width:115},{title:"登记机关",key:"acceptorAgencyName",width:120},{title:"申请日期",key:"applyDate",width:125},{title:"发证日期",key:"sendRegistDate",width:125},{title:"使用登记证编号",key:"registCode",width:150},{title:"操作",key:"opera",fixed:"right",width:120,render:function(e,a){return 3==t.$route.query.apply_state?e("div",[e("Button",{props:{type:"primary"},style:{marginRight:"5px"},on:{click:function(){t.$router.push({path:"stopUseApp",query:{deviceCode:t.data5[a.index].id,registCode:t.data5[a.index].registCode||"",deviceType:t.data5[a.index].deviceTypeId}})}}},"停用申请")]):4==t.$route.query.apply_state?e("div",[e("Button",{props:{type:"primary"},style:{marginRight:"5px"},on:{click:function(){t.$router.push({path:"disabledApp",query:{deviceCode:t.data5[a.index].id,registCode:t.data5[a.index].registCode||"",deviceType:t.data5[a.index].deviceTypeId}})}}},"报废申请")]):5==t.$route.query.apply_state?e("div",[e("Button",{props:{type:"primary"},style:{marginRight:"5px"},on:{click:function(){t.useAgain(t.data5[a.index].id)}}},"停用后启用申请")]):t.$route.query.apply_state?void 0:e("div",[e("Button",{props:{type:"primary"},style:{marginRight:"5px"},on:{click:function(){t.appDetail(a.index)}}},"设备详情")])}}],data5:[],state:{0:"待处理",1:"已通过",2:"已驳回"},params:{time:"",sort:"",state:"",page:1},time:"",num:0,currentPage:1,deviceCode:""}},mounted:function(){this.initData()},watch:{"$route.query":function(){"/devList"==this.$route.path&&this.initData()}},methods:n()({},a.i(r.b)(["selectedDeviceOption","setApplyType","changeBackTime"]),{initData:function(){this.time=["",""],this.$refs.pages.currentPage=1,this.setApplyType(this.$route.query.apply_state),this.apply_state=this.$route.query.apply_state,this.deviceType=[];var t="";this.apply_state?"3"===this.apply_state?t=this.makeParams(0,10,this.time,"",!1,"0"):"5"===this.apply_state?t=this.makeParams(0,10,this.time,"",!1,"1"):"4"===this.apply_state&&(t=this.makeParams(0,10,this.time,"",!1,""),t.states=[0,1]):t={page:0,size:10},this.getOrders(t)},clear:function(){this.initData()},getOrders:function(t){var e=this;s.a(t).then(function(t){if(200===t.status){e.data5=t.data.content,e.num=t.data.totalElements;for(var a=0;a<t.data.content.length;a++){e.changeBackTime(t.data.content[a].noUseDate);var i=new Date(t.data.content[a].createTime),n=i.getFullYear()+"年",r=(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"月",s=i.getDate()+"日";e.data5[a].applyDate=n+r+s}}else e.data5=[]}).catch(function(t){console.log(t)})},exactSearch:function(){var t=this;if(this.deviceCode){this.time=["",""],this.deviceType=[],this.deviceTypeId="";var e="deviceId="+this.deviceCode;s.b(e).then(function(e){console.log(e),200===e.status?(t.data5=[e.data],t.num=e.data.totalElements):401===e.status&&t.$Notice.error({title:"这是通知标题",desc:e.msg})}).catch(function(t){console.log(t)})}},changeTime:function(t){return[t[0].getFullYear()+"-"+(parseInt(t[0].getMonth())+1)+"-"+t[0].getDate(),t[1].getFullYear()+"-"+(parseInt(t[1].getMonth())+1)+"-"+t[1].getDate()]},makeParams:function(t,e,a,i,n,r){var s={};return s.page=t,s.size=e,""!==a&&""!==a[0]&&""!==a[1]&&(s.time=this.changeTime(a)),""!==i&&(s.deviceTypeId=parseInt(i)),""!==n&&(s.processing=n),""!==r&&(s.states=[parseInt(r)]),s},query:function(){this.$refs.pages.currentPage=1,this.deviceCode="";var t="";this.apply_state?"3"===this.apply_state?t=this.makeParams(0,10,this.time,this.deviceType[1],!1,"0"):"5"===this.apply_state?t=this.makeParams(0,10,this.time,this.deviceType[1],"","1"):"4"===this.apply_state&&(t=this.makeParams(0,10,this.time,this.deviceType[1],!1,""),t.states=[0,1]):t=this.makeParams(0,10,this.time,this.deviceType[1],"",""),this.getOrders(t)},initSize:function(t){var e="";this.apply_state?"3"===this.apply_state?e=this.makeParams(t-1,10,this.time,this.deviceType[1],!1,"0"):"5"===this.apply_state?e=this.makeParams(t-1,10,this.time,this.deviceType[1],"","1"):"4"===this.apply_state&&(e=this.makeParams(t-1,10,this.time,this.deviceType[1],!1,""),e.states=[0,1]):e=this.makeParams(t-1,10,this.time,this.deviceType[1],"",""),this.getOrders(e)},appDetail:function(t){this.$router.push({path:"deviceDetail",query:{deviceId:this.data5[t].id}})},useAgain:function(t){var e=this,a={};a.applyType=5,a.deviceId=t,console.log(t),o.f(a).then(function(t){if(200==t.status){var a=t.data.applyId;e.$Modal.confirm({title:"确认信息",content:"<p>确认启用该设备</p>",onOk:function(){var t="applyId="+a;o.j(t).then(function(a){a&&(t=e.makeParams(0,10,e.time,"",!1,"1"),e.getOrders(t))}).catch(function(t){console.log(t)})},onCancel:function(){e.$Message.info("点击了取消")}})}}).catch(function(t){console.log(t)})}}),computed:n()({},a.i(r.c)(["selectedOption"]),a.i(r.a)(["getSelectedOption","getApplyTypeName","getBackTime"]))}},760:function(t,e,a){e=t.exports=a(654)(!0),e.push([t.i,".filter-box[data-v-464f98d1]{display:block;border:1px solid #e5e5e5;border-top-left-radius:0;border-top-right-radius:0;border-bottom-right-radius:3px;border-bottom-left-radius:3px;padding:10px;margin-top:10px;box-sizing:border-box}.filter-box .query[data-v-464f98d1]{float:right;margin-right:60px;margin-top:10px}.innerBox[data-v-464f98d1]{border-top:1px solid #e5e5e5;padding-top:10px;margin-top:10px}.list-box[data-v-464f98d1]{display:block;height:400px;border-top-left-radius:0;border-top-right-radius:0;border-bottom-right-radius:3px;border-bottom-left-radius:3px;border-color:#dddee1;margin-top:10px;box-sizing:border-box}.list-box .page[data-v-464f98d1]{float:right;margin:10px}","",{version:3,sources:["/Users/wxdandelion/special_eq_project/src/page/apply/avaiableDev/devList.vue"],names:[],mappings:"AACA,6BACE,cAAe,AACf,yBAA0B,AAC1B,yBAA0B,AAC1B,0BAA2B,AAC3B,+BAAgC,AAChC,8BAA+B,AAC/B,aAAc,AACd,gBAAiB,AACjB,qBAAuB,CACxB,AACD,oCACI,YAAa,AACb,kBAAmB,AACnB,eAAiB,CACpB,AACD,2BACE,6BAA8B,AAC9B,iBAAkB,AAClB,eAAiB,CAClB,AACD,2BACE,cAAe,AACf,aAAc,AACd,yBAA0B,AAC1B,0BAA2B,AAC3B,+BAAgC,AAChC,8BAA+B,AAC/B,qBAAsB,AACtB,gBAAiB,AACjB,qBAAuB,CACxB,AACD,iCACI,YAAa,AACb,WAAa,CAChB",file:"devList.vue",sourcesContent:["\n.filter-box[data-v-464f98d1] {\n  display: block;\n  border: 1px solid #e5e5e5;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 3px;\n  border-bottom-left-radius: 3px;\n  padding: 10px;\n  margin-top: 10px;\n  box-sizing: border-box;\n}\n.filter-box .query[data-v-464f98d1] {\n    float: right;\n    margin-right: 60px;\n    margin-top: 10px;\n}\n.innerBox[data-v-464f98d1] {\n  border-top: 1px solid #e5e5e5;\n  padding-top: 10px;\n  margin-top: 10px;\n}\n.list-box[data-v-464f98d1] {\n  display: block;\n  height: 400px;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 3px;\n  border-bottom-left-radius: 3px;\n  border-color: #dddee1;\n  margin-top: 10px;\n  box-sizing: border-box;\n}\n.list-box .page[data-v-464f98d1] {\n    float: right;\n    margin: 10px;\n}\n"],sourceRoot:""}])},796:function(t,e,a){var i=a(760);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(655)("4c9b84b4",i,!0)},833:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"devList"},[a("div",{staticClass:"filter-box"},[a("Row",[a("Col",{attrs:{span:"9"}},[a("label",[t._v("申请时间")]),t._v(" "),a("Date-picker",{staticStyle:{width:"220px",display:"inline-block"},attrs:{type:"daterange",placeholder:"选择日期",format:"yyyy/MM/dd"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("label",[t._v("设备类别")]),t._v(" "),a("Cascader",{staticStyle:{width:"200px",display:"inline-block"},attrs:{data:t.options,trigger:"hover"},model:{value:t.deviceType,callback:function(e){t.deviceType=e},expression:"deviceType"}})],1),t._v(" "),a("Col",{attrs:{span:"7"}}),t._v(" "),a("Button",{staticClass:"query",attrs:{type:"ghost"},on:{click:function(e){t.clear()}}},[t._v("清空筛选")]),t._v(" "),a("Button",{staticClass:"query",attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")])],1),t._v(" "),a("div",{staticClass:"innerBox"},[a("Row",[a("Col",[a("label",[t._v("设备代码精准搜索")]),t._v(" "),a("Input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入设备代码"},model:{value:t.deviceCode,callback:function(e){t.deviceCode=e},expression:"deviceCode"}}),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.exactSearch}},[t._v("搜索")]),t._v(" "),a("Button",{staticClass:"query",attrs:{type:"warning"}},[a("a",{staticClass:"detail_a",staticStyle:{color:"white"},attrs:{href:"/device/getExcel",download:"总设备列表.xlsx"}},[t._v("下载设备列表")])])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"list-box"},[a("Table",{attrs:{border:"",columns:t.columns5,data:t.data5}}),t._v(" "),a("Page",{ref:"pages",staticClass:"page",attrs:{total:this.num,size:"small","show-elevator":"","page-size":10,current:t.currentPage},on:{"on-change":t.initSize}})],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=22.d59452b34665fb0c4e84.js.map